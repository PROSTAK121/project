<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>–ì–µ–æ—Ç—Ä–µ–∫–µ—Ä ‚Äî –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏—è</title>
    <link rel="stylesheet" href="/static/style.css">

    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <!-- Leaflet JS -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
</head>
<body>

    <!-- –®–∞–ø–∫–∞ -->
    <header>
        <h1>–ì–µ–æ—Ç—Ä–µ–∫–µ—Ä</h1>
        <nav>
            <ul>
                <li><a href="/">–ì–ª–∞–≤–Ω–∞—è</a></li>
                <li>
                    <a href="#">–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</a>
                    <ul>
                        <li><a href="/about">–û –Ω–∞—Å</a></li>
                        <li><a href="#contacts">–ö–æ–Ω—Ç–∞–∫—Ç—ã</a></li>
                    </ul>
                </li>
            </ul>
        </nav>
    </header>

    <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
    <main>
        <div class="card">
            <h2>üìç –ì–µ–æ–ª–æ–∫–∞—Ü–∏—è</h2>

            <div class="location-info">
                <p><span class="label">–®–∏—Ä–æ—Ç–∞:</span> <span id="lat">...</span></p>
                <p><span class="label">–î–æ–ª–≥–æ—Ç–∞:</span> <span id="lon">...</span></p>
                <p><span class="label">–ê–¥—Ä–µ—Å:</span> <span id="address">–ó–∞–≥—Ä—É–∑–∫–∞...</span></p>
            </div>

            <h3>üåÜ –í—ã–±–µ—Ä–∏—Ç–µ –ª—é–±–∏–º—ã–π –≥–æ—Ä–æ–¥</h3>
            <select id="city-select">
                <option value="moscow">–ú–æ—Å–∫–≤–∞</option>
                <option value="piter">–°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥</option>
                <option value="kazan">–ö–∞–∑–∞–Ω—å</option>
            </select>

            <h3 style="margin-top: 30px;">üó∫ –ö–∞—Ä—Ç–∞</h3>
            <div id="map"></div>

            <!-- –ö–Ω–æ–ø–∫–∞ "–ò—Å—Ç–æ—Ä–∏—è –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–π" -->
            <div class="history-button-container" style="text-align: center; margin-top: 20px;">
                <a href="/history" class="history-button" style="
                    display: inline-block;
                    background-color: #007BFF;
                    color: white;
                    padding: 10px 20px;
                    text-decoration: none;
                    border-radius: 6px;
                    font-weight: bold;
                    transition: background-color 0.3s ease;
                ">
                    üìã –ò—Å—Ç–æ—Ä–∏—è –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–π
                </a>
            </div>
        </div>

        <!-- –ö–æ–Ω—Ç–∞–∫—Ç—ã -->
        <div class="card" id="contacts">
            <h2>üìû –ö–æ–Ω—Ç–∞–∫—Ç—ã</h2>
            <p><strong>Email:</strong> geo.support@example.com</p>
            <p><strong>–¢–µ–ª–µ—Ñ–æ–Ω:</strong> +7 (999) 123-45-67</p>
            <p><strong>–ê–¥—Ä–µ—Å –æ—Ñ–∏—Å–∞:</strong> –≥. –ú–æ—Å–∫–≤–∞, —É–ª. –ü—Ä–∏–º–µ—Ä–Ω–∞—è, –¥. 12</p>
        </div>
    </main>

    <!-- –ú–µ–Ω—é –≤–Ω–∏–∑—É -->
    <aside class="bottom-menu">
        <ul>
            <li><a href="/">–ì–ª–∞–≤–Ω–∞—è</a></li>
            <li><a href="/about">–û –Ω–∞—Å</a></li>
            <li><a href="#contacts">–ö–æ–Ω—Ç–∞–∫—Ç—ã</a></li>
            <li><a href="#">–ß–∞—Å—Ç–æ –∑–∞–¥–∞–≤–∞–µ–º—ã–µ –≤–æ–ø—Ä–æ—Å—ã</a></li>
        </ul>
    </aside>

    <!-- –§—É—Ç–µ—Ä -->
    <footer>
        &copy; 2025 –ì–µ–æ—Ç—Ä–µ–∫–µ—Ä. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.
    </footer>

    <!-- –°–∫—Ä–∏–ø—Ç –≥–µ–æ–ª–æ–∫–∞—Ü–∏–∏ -->
    <script>
        let map;
        let marker;

        function updateLocation() {
            navigator.geolocation.getCurrentPosition(function(position) {
                const lat = position.coords.latitude;
                const lon = position.coords.longitude;

                document.getElementById("lat").innerText = lat.toFixed(6);
                document.getElementById("lon").innerText = lon.toFixed(6);

                fetch('/location', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ latitude: lat, longitude: lon })
                })
                .then(response => response.json())
                .then(data => {
                    document.getElementById("address").innerText = data.address;
                });

                if (!map) {
                    map = L.map('map').setView([lat, lon], 13);
                    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                        attribution: '¬© OpenStreetMap'
                    }).addTo(map);

                    marker = L.marker([lat, lon]).addTo(map).bindPopup("–í—ã –∑–¥–µ—Å—å").openPopup();
                } else {
                    marker.setLatLng([lat, lon]);
                    map.setView([lat, lon]);
                }
            });
        }

        setInterval(updateLocation, 10000);
        updateLocation();
    </script>
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>–û –Ω–∞—Å</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    <header>
        <h1>–ì–µ–æ—Ç—Ä–µ–∫–µ—Ä</h1>
        <nav>
            <a href="/">–ì–ª–∞–≤–Ω–∞—è</a>
            <a href="/about">–û –Ω–∞—Å</a>
        </nav>
    </header>

    <main>
        <h2>–û –Ω–∞—Å</h2>
        <p>–≠—Ç–æ —É—á–µ–±–Ω—ã–π –ø—Ä–æ–µ–∫—Ç –ø–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—é –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—é –µ–≥–æ –∞–¥—Ä–µ—Å–∞ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏.</p>
        <p>–¶–µ–ª—å –Ω–∞—à–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞ ‚Äî –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º —É–¥–æ–±–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ç–µ–∫—É—â–µ–º –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–∏ –∏ –µ–≥–æ –∏—Å—Ç–æ—Ä–∏–∏.</p>
    </main>

    <footer>
        &copy; 2025 –ì–µ–æ—Ç—Ä–µ–∫–µ—Ä. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.
    </footer>
</body>
</html>



